<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chapter 12: Web Development with Ruby - Ruby Bootcamp</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <header>
        <h1>Chapter 12: Web Development with Ruby</h1>
        <p>Build modern web applications with Ruby frameworks</p>
    </header>
    
    <main class="container">
        <div class="chapter-navigation">
            <a href="index.html" class="btn">← Back to Course Index</a>
            <a href="final_project.html" class="btn">Next: Final Project →</a>
        </div>

        <div class="slides-container">
            <div class="slide active" id="slide-1">
                <h2>Introduction to Ruby Web Development</h2>
                <div class="slide-content">
                    <div class="text-content">
                        <p>Ruby has a rich ecosystem of web development frameworks, from lightweight to full-featured, allowing developers to build anything from simple APIs to complex web applications.</p>
                        
                        <h3>The Ruby Web Stack</h3>
                        <ul>
                            <li><strong>HTTP Servers:</strong> Puma, Passenger, Unicorn</li>
                            <li><strong>Rack:</strong> The middleware interface between web servers and Ruby web applications</li>
                            <li><strong>Web Frameworks:</strong> Rails, Sinatra, Hanami, Roda</li>
                            <li><strong>Template Engines:</strong> ERB, Haml, Slim</li>
                            <li><strong>Asset Pipeline:</strong> Sprockets, Webpacker, Propshaft</li>
                            <li><strong>Frontend Integration:</strong> Hotwire (Turbo & Stimulus), ViewComponent</li>
                        </ul>
                        
                        <h3>Choosing the Right Framework</h3>
                        <p>The choice of framework depends on your project's needs:</p>
                        <ul>
                            <li><strong>Sinatra:</strong> Lightweight, minimal overhead, great for small apps and APIs</li>
                            <li><strong>Rails:</strong> Full-featured, convention over configuration, great for complex applications</li>
                            <li><strong>Hanami:</strong> Modular, clean architecture, good for maintainable medium-sized applications</li>
                            <li><strong>Roda:</strong> Routing tree web toolkit, focused on performance and simplicity</li>
                        </ul>
                        
                        <p>In this chapter, we'll focus on both Sinatra (for lightweight applications) and Rails (for more complex ones), as they represent the two most popular approaches in the Ruby ecosystem.</p>
                    </div>
                </div>
                <div class="slide-navigation">
                    <button class="btn prev-slide" disabled>Previous</button>
                    <span class="slide-indicator">Slide 1 of 8</span>
                    <button class="btn next-slide">Next</button>
                </div>
            </div>

            <div class="slide" id="slide-2">
                <h2>Sinatra for Lightweight Applications</h2>
                <div class="slide-content">
                    <div class="text-content">
                        <p>Sinatra is a DSL for quickly creating web applications in Ruby with minimal effort.</p>
                        
                        <h3>Getting Started with Sinatra</h3>
                        <div class="code-example">
                            <pre>require 'sinatra'

# Basic route
get '/' do
  'Hello, World!'
end

# Route with parameters
get '/hello/:name' do
  "Hello, #{params['name']}!"
end

# Route with query parameters
get '/search' do
  "You searched for: #{params['q']}"
end

# Route with different HTTP methods
post '/users' do
  # Create a user
  "User created: #{params['name']}"
end

put '/users/:id' do
  # Update a user
  "User #{params['id']} updated"
end

delete '/users/:id' do
  # Delete a user
  "User #{params['id']} deleted"
end</pre>
                        </div>
                        
                        <h3>Templates and Views</h3>
                        <div class="code-example">
                            <pre>get '/users' do
  @users = ['Alice', 'Bob', 'Charlie']
  erb :users  # Renders views/users.erb
end</pre>
                        </div>
                        
                        <p>And in <code>views/users.erb</code>:</p>
                        
                        <div class="code-example">
                            <pre>&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
  &lt;title&gt;Users&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
  &lt;h1&gt;Users&lt;/h1&gt;
  &lt;ul&gt;
    &lt;% @users.each do |user| %&gt;
      &lt;li&gt;&lt;%= user %&gt;&lt;/li&gt;
    &lt;% end %&gt;
  &lt;/ul&gt;
&lt;/body&gt;
&lt;/html&gt;</pre>
                        </div>
                    </div>
                </div>
                <div class="slide-navigation">
                    <button class="btn prev-slide">Previous</button>
                    <span class="slide-indicator">Slide 2 of 8</span>
                    <button class="btn next-slide">Next</button>
                </div>
            </div>

            <div class="slide" id="slide-3">
                <h2>Ruby on Rails Fundamentals</h2>
                <div class="slide-content">
                    <div class="text-content">
                        <p>Ruby on Rails is a full-featured web application framework that follows the Model-View-Controller (MVC) pattern and emphasizes Convention over Configuration.</p>
                        
                        <h3>Creating a New Rails Application</h3>
                        <div class="code-example">
                            <pre># Creating a new Rails application
rails new my_app

# Generating a resource
rails generate scaffold User name:string email:string

# Running migrations
rails db:migrate

# Starting the server
rails server</pre>
                        </div>
                        
                        <h3>Rails Directory Structure</h3>
                        <div class="code-example">
                            <pre>app/            # Application code
  controllers/  # Controller classes
  models/       # Model classes
  views/        # View templates
  assets/       # JavaScript, CSS, images
  helpers/      # View helper methods
  mailers/      # Email sending classes
  jobs/         # Background job classes
config/         # Configuration files
db/             # Database files
  migrate/      # Database migrations
lib/            # Library modules
public/         # Public assets
test/ or spec/  # Tests
vendor/         # Third-party code</pre>
                        </div>
                        
                        <h3>Rails Console</h3>
                        <p>The Rails console is an interactive Ruby shell that provides access to your Rails application's environment:</p>
                        
                        <div class="code-example">
                            <pre>$ rails console

# Creating a user
user = User.create(name: 'Alice', email: 'alice@example.com')

# Finding users
User.find(1)
User.where(name: 'Alice')

# Updating a user
user.update(name: 'Alicia')

# Deleting a user
user.destroy</pre>
                        </div>
                    </div>
                </div>
                <div class="slide-navigation">
                    <button class="btn prev-slide">Previous</button>
                    <span class="slide-indicator">Slide 3 of 8</span>
                    <button class="btn next-slide">Next</button>
                </div>
            </div>

            <div class="slide" id="slide-4">
                <h2>MVC Architecture Implementation</h2>
                <div class="slide-content">
                    <div class="text-content">
                        <p>The Model-View-Controller (MVC) pattern separates an application into three main components, each with a specific responsibility.</p>
                        
                        <h3>Models</h3>
                        <p>Models handle data and business logic:</p>
                        
                        <div class="code-example">
                            <pre>class User < ApplicationRecord
  has_many :posts, dependent: :destroy
  has_secure_password
  
  validates :email, presence: true, uniqueness: true, format: { with: URI::MailTo::EMAIL_REGEXP }
  validates :name, presence: true, length: { minimum: 2, maximum: 50 }
  
  before_save :downcase_email
  
  def downcase_email
    self.email = email.downcase
  end
  
  def full_name
    "#{first_name} #{last_name}"
  end
end</pre>
                        </div>
                        
                        <h3>Controllers</h3>
                        <p>Controllers handle web requests and orchestrate the application's response:</p>
                        
                        <div class="code-example">
                            <pre>class UsersController < ApplicationController
  before_action :set_user, only: [:show, :edit, :update, :destroy]
  before_action :authorize_user, only: [:edit, :update, :destroy]
  
  def index
    @users = User.all
  end
  
  def show
  end
  
  def new
    @user = User.new
  end
  
  def create
    @user = User.new(user_params)
    
    if @user.save
      redirect_to @user, notice: 'User was successfully created.'
    else
      render :new
    end
  end
  
  def update
    if @user.update(user_params)
      redirect_to @user, notice: 'User was successfully updated.'
    else
      render :edit
    end
  end
  
  def destroy
    @user.destroy
    redirect_to users_url, notice: 'User was successfully destroyed.'
  end
  
  private
  
  def set_user
    @user = User.find(params[:id])
  end
  
  def authorize_user
    redirect_to root_path, alert: 'Not authorized' unless current_user == @user
  end
  
  def user_params
    params.require(:user).permit(:name, :email, :password, :password_confirmation)
  end
end</pre>
                        </div>
                        
                        <h3>Views</h3>
                        <p>Views handle the presentation layer, rendering HTML, JSON, or other formats:</p>
                        
                        <div class="code-example">
                            <pre>&lt;!-- app/views/users/show.html.erb --&gt;
&lt;h1&gt;&lt;%= @user.name %&gt;&lt;/h1&gt;
&lt;p&gt;Email: &lt;%= @user.email %&gt;&lt;/p&gt;

&lt;% if current_user == @user %&gt;
  &lt;div class="actions"&gt;
    &lt;%= link_to 'Edit', edit_user_path(@user) %&gt;
    &lt;%= link_to 'Delete', user_path(@user), method: :delete, data: { confirm: 'Are you sure?' } %&gt;
  &lt;/div&gt;
&lt;% end %&gt;

&lt;h2&gt;Posts&lt;/h2&gt;
&lt;ul&gt;
  &lt;% @user.posts.each do |post| %&gt;
    &lt;li&gt;
      &lt;%= link_to post.title, post_path(post) %&gt;
      &lt;p&gt;&lt;%= post.created_at.strftime("%B %d, %Y") %&gt;&lt;/p&gt;
    &lt;/li&gt;
  &lt;% end %&gt;
&lt;/ul&gt;</pre>
                        </div>
                    </div>
                </div>
                <div class="slide-navigation">
                    <button class="btn prev-slide">Previous</button>
                    <span class="slide-indicator">Slide 4 of 8</span>
                    <button class="btn next-slide">Next</button>
                </div>
            </div>

            <div class="slide" id="slide-5">
                <h2>Asset Pipeline & Frontend Integration</h2>
                <div class="slide-content">
                    <div class="text-content">
                        <p>Ruby web frameworks provide tools for managing and serving frontend assets.</p>
                        
                        <h3>Rails Asset Pipeline</h3>
                        <p>The asset pipeline compiles, minifies, and fingerprints CSS, JavaScript, and image files:</p>
                        
                        <div class="code-example">
                            <pre>// app/assets/stylesheets/application.scss
@import "bootstrap";
@import "users";
@import "posts";

// app/assets/javascripts/application.js
//= require jquery
//= require rails-ujs
//= require turbolinks
//= require_tree .</pre>
                        </div>
                        
                        <h3>Hotwire: Modern Frontend for Rails</h3>
                        <p>Hotwire combines Turbo and Stimulus to provide a modern, HTML-over-the-wire approach:</p>
                        
                        <div class="code-example">
                            <pre>&lt;!-- Turbo Frames for partial page updates --&gt;
&lt;turbo-frame id="user_list"&gt;
  &lt;h2&gt;Users&lt;/h2&gt;
  &lt;ul&gt;
    &lt;% @users.each do |user| %&gt;
      &lt;li&gt;&lt;%= link_to user.name, user_path(user) %&gt;&lt;/li&gt;
    &lt;% end %&gt;
  &lt;/ul&gt;
&lt;/turbo-frame&gt;

&lt;!-- Stimulus for JavaScript behaviors --&gt;
&lt;div data-controller="toggle"&gt;
  &lt;button data-action="click->toggle#toggle"&gt;Show/Hide&lt;/button&gt;
  &lt;div data-toggle-target="content" class="hidden"&gt;
    Hidden content
  &lt;/div&gt;
&lt;/div&gt;</pre>
                        </div>
                        
                        <div class="code-example">
                            <pre>// app/javascript/controllers/toggle_controller.js
import { Controller } from "stimulus"

export default class extends Controller {
  static targets = [ "content" ]
  
  toggle() {
    this.contentTarget.classList.toggle("hidden")
  }
}</pre>
                        </div>
                        
                        <h3>ViewComponent for Reusable UI Components</h3>
                        <div class="code-example">
                            <pre>class UserCardComponent < ViewComponent::Base
  def initialize(user:)
    @user = user
  end
end

# app/components/user_card_component.html.erb
&lt;div class="user-card"&gt;
  &lt;img src="&lt;%= @user.avatar_url %&gt;" alt="&lt;%= @user.name %&gt;"&gt;
  &lt;h3&gt;&lt;%= @user.name %&gt;&lt;/h3&gt;
  &lt;p&gt;&lt;%= @user.bio %&gt;&lt;/p&gt;
&lt;/div&gt;

# In a view
&lt;%= render(UserCardComponent.new(user: @user)) %&gt;</pre>
                        </div>
                    </div>
                </div>
                <div class="slide-navigation">
                    <button class="btn prev-slide">Previous</button>
                    <span class="slide-indicator">Slide 5 of 8</span>
                    <button class="btn next-slide">Next</button>
                </div>
            </div>

            <div class="slide" id="slide-6">
                <h2>Authentication & Authorization</h2>
                <div class="slide-content">
                    <div class="text-content">
                        <p>Most web applications need to authenticate users and authorize their actions. Ruby provides several solutions for this.</p>
                        
                        <h3>Authentication with Devise</h3>
                        <p>Devise is a flexible authentication solution for Rails:</p>
                        
                        <div class="code-example">
                            <pre># Gemfile
gem 'devise'

# Install devise
rails generate devise:install

# Generate a User model with Devise
rails generate devise User

# Configure Devise modules in the User model
class User < ApplicationRecord
  devise :database_authenticatable, :registerable,
         :recoverable, :rememberable, :validatable,
         :confirmable, :lockable, :timeoutable, :trackable
end

# In a controller
class ProtectedController < ApplicationController
  before_action :authenticate_user!
  
  def index
    @user = current_user
  end
end</pre>
                        </div>
                        
                        <h3>Authorization with Pundit</h3>
                        <p>Pundit provides a simple way to define authorization policies:</p>
                        
                        <div class="code-example">
                            <pre># Gemfile
gem 'pundit'

# Policy class
class PostPolicy < ApplicationPolicy
  def show?
    true  # Anyone can view posts
  end
  
  def create?
    user.present?  # Only logged-in users can create posts
  end
  
  def update?
    user.present? && (user.admin? || record.user == user)
  end
  
  def destroy?
    user.present? && (user.admin? || record.user == user)
  end
end

# In a controller
class PostsController < ApplicationController
  before_action :authenticate_user!, except: :show
  
  def show
    @post = Post.find(params[:id])
    authorize @post
  end
  
  def update
    @post = Post.find(params[:id])
    authorize @post
    
    if @post.update(post_params)
      redirect_to @post
    else
      render :edit
    end
  end
end</pre>
                        </div>
                    </div>
                </div>
                <div class="slide-navigation">
                    <button class="btn prev-slide">Previous</button>
                    <span class="slide-indicator">Slide 6 of 8</span>
                    <button class="btn next-slide">Next</button>
                </div>
            </div>

            <div class="slide" id="slide-7">
                <h2>Background Jobs & WebSockets</h2>
                <div class="slide-content">
                    <div class="text-content">
                        <p>Modern web applications often need to perform tasks asynchronously and provide real-time updates.</p>
                        
                        <h3>Background Jobs with Sidekiq</h3>
                        <p>Sidekiq provides efficient background processing for Ruby:</p>
                        
                        <div class="code-example">
                            <pre># Gemfile
gem 'sidekiq'

# Job class
class NewsletterJob
  include Sidekiq::Job
  
  def perform(user_id)
    user = User.find(user_id)
    NewsletterMailer.weekly(user).deliver_now
  end
end

# Enqueueing a job
NewsletterJob.perform_async(user.id)

# Scheduling a job for later
NewsletterJob.perform_in(1.hour, user.id)

# Running at specific times
NewsletterJob.perform_at(1.day.from_now.beginning_of_day, user.id)</pre>
                        </div>
                        
                        <h3>Real-time Updates with Action Cable</h3>
                        <p>Action Cable integrates WebSockets with the rest of your Rails application:</p>
                        
                        <div class="code-example">
                            <pre># app/channels/chat_channel.rb
class ChatChannel < ApplicationCable::Channel
  def subscribed
    stream_from "chat_#{params[:room_id]}"
  end
  
  def receive(data)
    ActionCable.server.broadcast("chat_#{params[:room_id]}", data)
  end
end

# app/javascript/channels/chat_channel.js
import consumer from "./consumer"

consumer.subscriptions.create({ channel: "ChatChannel", room_id: 1 }, {
  connected() {
    console.log("Connected to chat channel")
  },
  
  received(data) {
    // Add the message to the chat window
    const messagesContainer = document.querySelector("#messages")
    const messageElement = document.createElement("div")
    messageElement.innerHTML = `
      &lt;p&gt;&lt;strong&gt;${data.user}&lt;/strong&gt;: ${data.message}&lt;/p&gt;
    `
    messagesContainer.appendChild(messageElement)
  }
})</pre>
                        </div>
                        
                        <h3>Sending messages from a controller</h3>
                        <div class="code-example">
                            <pre>class MessagesController < ApplicationController
  def create
    @message = current_user.messages.build(message_params)
    
    if @message.save
      ActionCable.server.broadcast(
        "chat_#{@message.room_id}",
        user: current_user.name,
        message: @message.content
      )
      head :ok
    else
      render json: { errors: @message.errors.full_messages }, status: :unprocessable_entity
    end
  end
  
  private
  
  def message_params
    params.require(:message).permit(:content, :room_id)
  end
end</pre>
                        </div>
                    </div>
                </div>
                <div class="slide-navigation">
                    <button class="btn prev-slide">Previous</button>
                    <span class="slide-indicator">Slide 7 of 8</span>
                    <button class="btn next-slide">Next</button>
                </div>
            </div>

            <div class="slide" id="slide-8">
                <h2>Deployment & Production Considerations</h2>
                <div class="slide-content">
                    <div class="text-content">
                        <p>Deploying a Ruby web application to production requires careful planning and configuration.</p>
                        
                        <h3>Deployment Options</h3>
                        <ul>
                            <li><strong>Platform as a Service (PaaS):</strong> Heroku, Render, Fly.io</li>
                            <li><strong>Infrastructure as a Service (IaaS):</strong> AWS, GCP, Azure</li>
                            <li><strong>Container Orchestration:</strong> Kubernetes, Docker Swarm</li>
                            <li><strong>Traditional VPS:</strong> Digital Ocean, Linode, AWS EC2</li>
                        </ul>
                        
                        <h3>Deployment with Capistrano</h3>
                        <div class="code-example">
                            <pre># Gemfile
group :development do
  gem 'capistrano'
  gem 'capistrano-rails'
  gem 'capistrano-rbenv'
  gem 'capistrano-bundler'
  gem 'capistrano-passenger'
end

# config/deploy.rb
lock "~> 3.17.0"

set :application, "my_app"
set :repo_url, "git@github.com:username/my_app.git"
set :deploy_to, "/var/www/my_app"
set :linked_files, %w{config/database.yml config/master.key}
set :linked_dirs, %w{log tmp/pids tmp/cache tmp/sockets vendor/bundle public/system}

# Deployment
cap production deploy</pre>
                        </div>
                        
                        <h3>Production Configuration</h3>
                        <ul>
                            <li><strong>Environment Variables:</strong> Use environment variables for sensitive configuration</li>
                            <li><strong>Secret Management:</strong> Use Rails credentials or a service like AWS Secrets Manager</li>
                            <li><strong>SSL/TLS:</strong> Always use HTTPS in production</li>
                            <li><strong>Content Security Policy:</strong> Define a strict CSP</li>
                            <li><strong>Database Configuration:</strong> Use connection pooling and optimized settings</li>
                            <li><strong>Caching:</strong> Implement multiple levels of caching</li>
                            <li><strong>Monitoring:</strong> Set up error tracking, performance monitoring, and logging</li>
                        </ul>
                        
                        <h3>Scaling Ruby Applications</h3>
                        <ul>
                            <li><strong>Horizontal Scaling:</strong> Add more application servers</li>
                            <li><strong>Vertical Scaling:</strong> Use more powerful servers</li>
                            <li><strong>Caching:</strong> Implement page, fragment, and HTTP caching</li>
                            <li><strong>Database Optimization:</strong> Indexes, query optimization, read replicas</li>
                            <li><strong>Content Delivery Networks (CDNs):</strong> For static assets</li>
                            <li><strong>Background Processing:</strong> Offload heavy tasks to background jobs</li>
                        </ul>
                        
                        <div class="mini-project">
                            <h4>Mini Project: Blog Application</h4>
                            <p>Build a blog application with the following features:</p>
                            <ol>
                                <li>User authentication with Devise</li>
                                <li>Blog post CRUD operations</li>
                                <li>Comments with real-time updates using Action Cable</li>
                                <li>Image uploads for blog posts</li>
                                <li>Tagging and categorization</li>
                                <li>Admin dashboard for content management</li>
                                <li>Email notifications for new comments using background jobs</li>
                                <li>API endpoints for mobile applications</li>
                            </ol>
                            <p>Deploy your application to a free tier on Heroku or Render.</p>
                        </div>
                        
                        <div class="cta-container">
                            <a href="#" class="btn complete-chapter">Complete Chapter</a>
                        </div>
                    </div>
                </div>
                <div class="slide-navigation">
                    <button class="btn prev-slide">Previous</button>
                    <span class="slide-indicator">Slide 8 of 8</span>
                    <button class="btn next-slide" disabled>Next</button>
                </div>
            </div>
        </div>
    </main>

    <footer>
        <p>&copy; 2025 Ruby Bootcamp</p>
    </footer>

    <script src="script.js"></script>
</body>
</html>
